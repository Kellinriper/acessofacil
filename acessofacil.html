<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AcessoF√°cil - Revolucionando a Acessibilidade Digital</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --text: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding: 10px;
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header-badge {
            background: var(--accent);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            display: inline-block;
            margin-bottom: 10px;
            font-weight: 600;
        }

        h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            font-weight: 700;
            line-height: 1.2;
        }

        .tagline {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 15px;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: 800;
            margin-bottom: 5px;
            color: var(--success);
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .main-content {
            padding: 20px;
        }

        .section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.6em;
            margin-bottom: 15px;
            color: var(--primary);
            position: relative;
            padding-bottom: 8px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
        }

        .feature-icon {
            font-size: 2em;
            margin-bottom: 12px;
            color: var(--secondary);
        }

        .feature-title {
            font-size: 1.2em;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .consent-box {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .consent-box h3 {
            color: #856404;
            margin-bottom: 12px;
            font-size: 1.3em;
        }

        .terms {
            margin-bottom: 15px;
        }

        .terms ul {
            margin: 12px 0;
            padding-left: 20px;
        }

        .terms li {
            margin: 8px 0;
            color: #666;
            font-size: 0.95em;
        }

        .btn {
            background: var(--secondary);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            justify-content: center;
            text-align: center;
        }

        .btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: var(--success);
        }

        .btn-primary:hover {
            background: #219653;
        }

        .btn-pdf {
            background: #e74c3c;
        }

        .btn-pdf:hover {
            background: #c0392b;
        }

        .analyzer-section {
            background: var(--light);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
            width: 100%;
        }

        input[type="url"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="url"]:focus {
            border-color: var(--secondary);
            outline: none;
        }

        .url-examples {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 12px 0;
        }

        .url-chip {
            background: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--secondary);
            color: var(--secondary);
        }

        .url-chip:hover {
            background: var(--secondary);
            color: white;
        }

        .loading {
            text-align: center;
            padding: 25px;
            display: none;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--secondary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            margin-top: 25px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-card {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .summary-card h3 {
            font-size: 1.8em;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .summary-card p {
            font-size: 1em;
            color: var(--text);
        }

        .summary-card.good {
            border-top: 3px solid var(--success);
        }

        .summary-card.warning {
            border-top: 3px solid var(--warning);
        }

        .summary-card.danger {
            border-top: 3px solid var(--accent);
        }

        .issues-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .issue {
            background: white;
            padding: 15px;
            border-left: 3px solid var(--accent);
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .issue.low {
            border-left-color: var(--warning);
        }

        .issue.medium {
            border-left-color: #fd7e14;
        }

        .issue.high {
            border-left-color: var(--accent);
        }

        .impact-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            margin-left: 8px;
        }

        .impact-visual {
            background: var(--light);
            padding: 12px;
            border-radius: 6px;
            margin: 12px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .impact-icon {
            font-size: 1.5em;
            color: var(--secondary);
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--text);
            border-top: 1px solid #eee;
            background: var(--light);
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content p {
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        /* Media queries para dispositivos maiores */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            header {
                padding: 30px;
            }
            
            .header-badge {
                padding: 8px 16px;
                font-size: 0.9em;
            }
            
            h1 {
                font-size: 2.8em;
            }
            
            .tagline {
                font-size: 1.3em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 30px 0;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .stat-number {
                font-size: 2.5em;
            }
            
            .main-content {
                padding: 40px;
            }
            
            .section {
                margin-bottom: 50px;
            }
            
            .section-title {
                font-size: 2em;
                margin-bottom: 20px;
            }
            
            .features-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 25px;
                margin: 30px 0;
            }
            
            .feature-card {
                padding: 25px;
            }
            
            .btn {
                width: auto;
                padding: 15px 30px;
            }
            
            .input-group {
                flex-direction: row;
            }
            
            input[type="url"] {
                min-width: 300px;
            }
        }

        /* Ajustes adicionais para telas muito pequenas */
        @media (max-width: 360px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .summary {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .section-title {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-badge">Tecnologia IA para Acessibilidade</div>
                <h1>AcessoF√°cil</h1>
                <p class="tagline">Revolucionando a acessibilidade digital com IA avan√ßada para os 45 milh√µes de brasileiros com defici√™ncia</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">45M</div>
                        <div class="stat-label">Pessoas com defici√™ncia no Brasil</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">5%</div>
                        <div class="stat-label">Sites verdadeiramente acess√≠veis</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">2015</div>
                        <div class="stat-label">Obrigatoriedade legal desde</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="section">
                <h2 class="section-title">Nossa Solu√ß√£o Inovadora</h2>
                <p>O AcessoF√°cil utiliza intelig√™ncia artificial avan√ßada para identificar problemas contextuais de acessibilidade que ferramentas tradicionais n√£o detectam, fornecendo recomenda√ß√µes personalizadas e implement√°veis.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ü§ñ</div>
                        <h3 class="feature-title">An√°lise Sem√¢ntica Inteligente</h3>
                        <p>IA que compreende contexto e inten√ß√£o, identificando problemas que verificadores tradicionais ignoram.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîê</div>
                        <h3 class="feature-title">Verifica√ß√£o em √Åreas Autenticadas</h3>
                        <p>Bookmarklet exclusivo para an√°lise behind-the-login em aplica√ß√µes web complexas.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3 class="feature-title">Relat√≥rios Priorit√°rios por Impacto</h3>
                        <p>Foco nas corre√ß√µes que impactam diretamente usu√°rios e diferentes tipos de defici√™ncia.</p>
                    </div>
                </div>
            </div>

            <div class="consent-box">
                <h3>Termos de Uso e Consentimento</h3>
                <div class="terms">
                    <p>Antes de usar o AcessoF√°cil, concorde com nossos termos √©ticos de an√°lise:</p>
                    <ul>
                        <li>‚úì An√°lise respons√°vel e √©tica de websites</li>
                        <li>‚úì Respeito ao robots.txt e diretrizes de cada site</li>
                        <li>‚úì Dados anal√≠ticos anonimizados e seguros</li>
                        <li>‚úì Foco exclusivo em melhorar a acessibilidade digital</li>
                        <li>‚úì Conformidade com a LGPD e regulamenta√ß√µes brasileiras</li>
                    </ul>
                    <p><strong>Pol√≠tica de Privacidade:</strong> Nosso compromisso √© com a acessibilidade, n√£o coletamos conte√∫do dos sites analisados, apenas metadados t√©cnicos para gerar relat√≥rios de melhorias.</p>
                </div>
                <button class="btn" onclick="acceptConsent()">
                    <span>‚úÖ</span> Concordo e Quero Melhorar a Acessibilidade
                </button>
            </div>

            <div class="analyzer-section" id="analyzer" style="display: none;">
                <h2 class="section-title">Analisador de Acessibilidade</h2>
                <p>Digite a URL do site que deseja analisar ou teste com nossos exemplos:</p>
                
                <div class="input-group">
                    <input type="url" id="urlInput" 
                           placeholder="https://exemplo.com" 
                           pattern="https?://.+">
                    <button class="btn btn-primary" onclick="analyzeWebsite()">
                        <span>üîç</span> Analisar Acessibilidade
                    </button>
                </div>
                
                <div class="url-examples">
                    <span class="url-chip" onclick="setExampleUrl('https://www.gov.br')">gov.br</span>
                    <span class="url-chip" onclick="setExampleUrl('https://www.mercadolivre.com.br')">Mercado Livre</span>
                    <span class="url-chip" onclick="setExampleUrl('https://www.saraiva.com.br')">Saraiva</span>
                    <span class="url-chip" onclick="setExampleUrl('https://www.ifood.com.br')">iFood</span>
                    <span class="url-chip" onclick="setExampleUrl('https://www.magazineluiza.com.br')">Magazine Luiza</span>
                </div>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analisando acessibilidade com IA avan√ßada...</p>
                    <p><small>Detectando problemas contextuais e sem√¢nticos</small></p>
                </div>
                
                <div class="results" id="results"></div>
            </div>

            <div class="section">
                <h2 class="section-title">Diferenciais Competitivos</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <h3 class="feature-title">üí° An√°lise Contextual com IA</h3>
                        <p>Vai al√©m de verifica√ß√µes t√©cnicas, entendendo o significado e contexto real do conte√∫do.</p>
                    </div>
                    <div class="feature-card">
                        <h3 class="feature-title">üåç Foco no Mercado Lus√≥fono</h3>
                        <p>Especialmente desenvolvido para realidade brasileira e portuguesa, com suporte a legisla√ß√µes locais.</p>
                    </div>
                    <div class="feature-card">
                        <h3 class="feature-title">‚ö° Implementa√ß√£o Priorit√°ria</h3>
                        <p>Relat√≥rios que destacam por impacto real, n√£o apenas por crit√©rios t√©cnicos.</p>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-content">
                <p><strong>AcessoF√°cil</strong> ¬© 2025 - Transformando a acessibilidade digital no Brasil</p>
                <p>Conformidade com Lei Brasileira de Inclus√£o (LBI) ‚Ä¢ LGPD ‚Ä¢ eMAG</p>
                <p><small>Uma solu√ß√£o brasileira para um desafio brasileiro</small></p>
            </div>
        </footer>
    </div>

    <script>
        
        const { jsPDF } = window.jspdf;

        
        let userConsent = false;
        let currentReport = null;

                document.addEventListener('DOMContentLoaded', function() {
            const savedConsent = localStorage.getItem('acessofacil_consent');
            if (savedConsent === 'true') {
                userConsent = true;
                document.getElementById('analyzer').style.display = 'block';
            }
        });

                function acceptConsent() {
            userConsent = true;
            localStorage.setItem('acessofacil_consent', 'true');
            document.getElementById('analyzer').style.display = 'block';
            document.querySelector('.consent-box').style.display = 'none';
        }

                function setExampleUrl(url) {
            document.getElementById('urlInput').value = url;
        }

               async function analyzeWebsite() {
            const urlInput = document.getElementById('urlInput');
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.getElementById('loading');
            const url = urlInput.value.trim();

                       if (!url) {
                alert('Por favor, digite uma URL para an√°lise');
                return;
            }

            if (!userConsent) {
                alert('Por favor, concorde com os termos de uso antes de continuar');
                return;
            }

                       if (!isValidUrl(url)) {
                alert('Por favor, digite uma URL v√°lida come√ßando com http:// ou https://');
                return;
            }

                       loadingDiv.style.display = 'block';
            resultsDiv.style.display = 'none';
            resultsDiv.innerHTML = '';

            try {
                // Simular an√°lise com IA (em produ√ß√£o, seria uma API real)
                const report = await simulateIAAnalysis(url);
                currentReport = report;
                
                                displayResults(report);
                
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error">
                        <h3>‚ùå Erro na An√°lise</h3>
                        <p>${error.message || 'N√£o foi poss√≠vel analisar o site. Tente novamente.'}</p>
                        <p><small>Poss√≠veis causas: restri√ß√µes do site, conex√£o inst√°vel ou timeout.</small></p>
                    </div>
                `;
                resultsDiv.style.display = 'block';
            } finally {
                loadingDiv.style.display = 'none';
            }
        }

                function isValidUrl(string) {
            try {
                const url = new URL(string);
                return url.protocol === 'http:' || url.protocol === 'https:';
            } catch (_) {
                return false;
            }
        }

        // Simular an√°lise com IA
        async function simulateIAAnalysis(url) {
            // Simular tempo de processamento com IA
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            const domain = new URL(url).hostname;
            const isEcommerce = domain.includes('mercadolivre') || domain.includes('magazineluiza') || domain.includes('saraiva');
            const isGovernment = domain.includes('gov.br');
            
            return {
                success: true,
                data: {
                    url: url,
                    timestamp: new Date().toISOString(),
                    accessibilityScore: Math.floor(Math.random() * 40) + 30, // Entre 30-70
                    summary: {
                        totalElements: Math.floor(Math.random() * 500) + 300,
                        elementsWithIssues: Math.floor(Math.random() * 100) + 50,
                        criticalIssues: Math.floor(Math.random() * 10) + 5,
                        contextualIssues: Math.floor(Math.random() * 15) + 8,
                        impactAnalysis: {
                            visual: Math.floor(Math.random() * 20) + 10,
                            motor: Math.floor(Math.random() * 15) + 8,
                            cognitive: Math.floor(Math.random() * 12) + 6,
                            auditory: Math.floor(Math.random() * 8) + 3
                        }
                    },
                    issues: generateContextualIssues(domain, isEcommerce, isGovernment)
                }
            };
        }

                function generateContextualIssues(domain, isEcommerce, isGovernment) {
            const issues = [];
            
                        issues.push({
                type: 'contextual',
                severity: 'high',
                message: 'Bot√µes com descri√ß√£o inadequada para leitores de tela',
                suggestion: 'Use aria-labels descritivos para a√ß√µes importantes',
                impact: 'cegos',
                context: 'Leitores de tela n√£o conseguem descrever a fun√ß√£o real do bot√£o'
            });
            
            issues.push({
                type: 'semantic',
                severity: 'medium',
                message: 'Estrutura de cabe√ßalhos n√£o hier√°rquica',
                suggestion: 'Mantenha sequ√™ncia l√≥gica de H1-H6 para melhor navega√ß√£o',
                impact: 'deficientes visuais',
                context: 'Quebra o fluxo de navega√ß√£o por leitores de tela'
            });
            
                       if (isEcommerce) {
                issues.push({
                    type: 'contextual',
                    severity: 'high',
                    message: 'Processo de checkout n√£o acess√≠vel para navega√ß√£o por teclado',
                    suggestion: 'Implemente navega√ß√£o sequencial e skip links no fluxo de compra',
                    impact: 'deficientes motores',
                    context: 'Impede conclus√£o de compra por usu√°rios que n√£o usam mouse'
                });
                
                issues.push({
                    type: 'semantic',
                    severity: 'medium',
                    message: 'Descri√ß√µes de produtos inadequadas para leitores de tela',
                    suggestion: 'Use alt text descritivo e informa√ß√µes t√°teis para produtos',
                    impact: 'cegos',
                    context: 'Usu√°rios cegos n√£o conseguem entender caracter√≠sticas dos produtos'
                });
            }
            
                     if (isGovernment) {
                issues.push({
                    type: 'contextual',
                    severity: 'high',
                    message: 'Formul√°rios complexos sem instru√ß√µes claras',
                    suggestion: 'Adicione instru√ß√µes passo a passo e valida√ß√£o em tempo real',
                    impact: 'cognitivos',
                    context: 'Usu√°rios com dificuldades cognitivas abandonam formul√°rios importantes'
                });
            }
            
            issues.push({
                type: 'contrast',
                severity: 'medium',
                message: 'Problemas de contraste em elementos interativos',
                suggestion: 'Ajuste cores para atingir ratio m√≠nimo de 4.5:1 conforme WCAG',
                impact: 'baixa vis√£o',
                context: 'Elementos importantes n√£o s√£o percept√≠veis para usu√°rios com baixa vis√£o'
            });
            
            return issues;
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            const report = data.data || data;
            
            let html = `
                <h2>üìä Relat√≥rio de Acessibilidade com IA</h2>
                <p><strong>URL analisada:</strong> ${report.url}</p>
                <p><strong>Data da an√°lise:</strong> ${new Date(report.timestamp).toLocaleString('pt-BR')}</p>
                
                <div class="summary">
                    <div class="summary-card ${report.accessibilityScore > 60 ? 'good' : report.accessibilityScore > 40 ? 'warning' : 'danger'}">
                        <h3>${report.accessibilityScore}/100</h3>
                        <p>Pontua√ß√£o de Acessibilidade</p>
                    </div>
                    <div class="summary-card danger">
                        <h3>${report.summary.criticalIssues}</h3>
                        <p>Problemas Cr√≠ticos</p>
                    </div>
                    <div class="summary-card warning">
                        <h3>${report.summary.contextualIssues}</h3>
                        <p>Problemas Contextuais</p>
                    </div>
                </div>
                
                <h3>üéØ An√°lise de Impacto por Tipo de Defici√™ncia</h3>
                <div class="impact-visual">
                    <div class="impact-icon">üëÅÔ∏è</div>
                    <div>
                        <strong>Deficientes Visuais:</strong> ${report.summary.impactAnalysis.visual} problemas detectados
                    </div>
                </div>
                <div class="impact-visual">
                    <div class="impact-icon">üñêÔ∏è</div>
                    <div>
                        <strong>Deficientes Motores:</strong> ${report.summary.impactAnalysis.motor} problemas detectados
                    </div>
                </div>
                <div class="impact-visual">
                    <div class="impact-icon">üß†</div>
                    <div>
                        <strong>Deficientes Cognitivos:</strong> ${report.summary.impactAnalysis.cognitive} problemas detectados
                    </div>
                </div>
            `;

            if (report.issues && report.issues.length > 0) {
                html += `<h3>‚ö†Ô∏è Problemas Contextuais Detectados pela IA</h3>
                         <div class="issues-list">`;
                
                report.issues.forEach(issue => {
                    html += `
                        <div class="issue ${issue.severity}">
                            <h4>${issue.type.toUpperCase()} - ${getSeverityText(issue.severity)} 
                                <span class="impact-badge" style="background: ${getImpactColor(issue.impact)}">${getImpactText(issue.impact)}</span>
                            </h4>
                            <p>${issue.message}</p>
                            <p><strong>Contexto:</strong> ${issue.context}</p>
                            <p><strong>Sugest√£o IA:</strong> ${issue.suggestion}</p>
                        </div>
                    `;
                });
                
                html += `</div>`;
            }

            html += `
                <div style="margin-top: 30px; padding: 20px; background: #e8f5e8; border-radius: 10px;">
                    <h3>üöÄ Pr√≥ximos Passos Recomendados</h3>
                    <p>1. Priorize corre√ß√µes por impacto real nos usu√°rios</p>
                    <p>2. Implemente o bookmarklet para an√°lise behind-login</p>
                    <p>3. Agende uma consultoria personalizada para seu time</p>
                    <button class="btn btn-pdf" onclick="generatePDF()">
                        <span>üìã</span> Gerar Relat√≥rio em PDF
                    </button>
                </div>
            `;

            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }

        function generatePDF() {
            if (!currentReport) {
                alert('Nenhum relat√≥rio dispon√≠vel para exportar.');
                return;
            }

            const report = currentReport.data || currentReport;
            
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            const margin = 15;
            let yPosition = 15;
            
            doc.setFillColor(44, 62, 80);
            doc.rect(0, 0, pageWidth, 30, 'F');
            doc.setFontSize(20);
            doc.setTextColor(255, 255, 255);
            doc.text('Relat√≥rio de Acessibilidade - AcessoF√°cil', pageWidth / 2, 20, { align: 'center' });
            
            yPosition = 40;
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.setFont(undefined, 'bold');
            doc.text('URL analisada:', margin, yPosition);
            doc.setFont(undefined, 'normal');
            const urlLines = doc.splitTextToSize(report.url, pageWidth - margin - 45);
            doc.text(urlLines, margin + 35, yPosition);
            
            yPosition += urlLines.length * 7;
            doc.setFont(undefined, 'bold');
            doc.text('Data da an√°lise:', margin, yPosition);
            doc.setFont(undefined, 'normal');
            doc.text(new Date(report.timestamp).toLocaleString('pt-BR'), margin + 35, yPosition);
            
            yPosition += 10;
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(44, 62, 80);
            doc.text('Pontua√ß√£o de Acessibilidade', margin, yPosition);
            
            yPosition += 10;
            doc.setFontSize(32);
            const scoreColor = report.accessibilityScore > 60 ? [39, 174, 96] : report.accessibilityScore > 40 ? [243, 156, 18] : [231, 76, 60];
            doc.setTextColor(scoreColor[0], scoreColor[1], scoreColor[2]);
            doc.text(`${report.accessibilityScore}/100`, margin, yPosition);
            
            yPosition += 15;
            doc.setFontSize(12);
            doc.setTextColor(100, 100, 100);
            doc.text('Nota: Pontua√ß√£o baseada nas diretrizes WCAG 2.1 e an√°lise contextual com IA', margin, yPosition);
            
            yPosition += 20;
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(44, 62, 80);
            doc.text('Resumo da An√°lise', margin, yPosition);
            
            yPosition += 10;
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            const summaryData = [
                ['Total de Elementos', report.summary.totalElements],
                ['Elementos com Problemas', report.summary.elementsWithIssues],
                ['Problemas Cr√≠ticos', report.summary.criticalIssues],
                ['Problemas Contextuais', report.summary.contextualIssues]
            ];
            
            doc.autoTable({
                startY: yPosition,
                head: [['M√©trica', 'Valor']],
                body: summaryData,
                theme: 'grid',
                headStyles: {
                    fillColor: [44, 62, 80],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold'
                },
                margin: { left: margin, right: margin }
            });
            
            yPosition = doc.lastAutoTable.finalY + 15;
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(44, 62, 80);
            doc.text('An√°lise de Impacto por Tipo de Defici√™ncia', margin, yPosition);
            
            yPosition += 10;
            
            const impactData = [
                ['Deficientes Visuais', report.summary.impactAnalysis.visual],
                ['Deficientes Motores', report.summary.impactAnalysis.motor],
                ['Deficientes Cognitivos', report.summary.impactAnalysis.cognitive],
                ['Deficientes Auditivos', report.summary.impactAnalysis.auditory]
            ];
            
            doc.autoTable({
                startY: yPosition,
                head: [['Tipo de Defici√™ncia', 'Problemas Detectados']],
                body: impactData,
                theme: 'grid',
                headStyles: {
                    fillColor: [44, 62, 80],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold'
                },
                margin: { left: margin, right: margin }
            });
            
            yPosition = doc.lastAutoTable.finalY + 15;
            
            if (report.issues && report.issues.length > 0) {
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(44, 62, 80);
                doc.text('Problemas Contextuais Detectados', margin, yPosition);
                
                yPosition += 10;
                
                const issuesData = report.issues.map(issue => [
                    issue.type.toUpperCase(),
                    getSeverityText(issue.severity),
                    getImpactText(issue.impact),
            
                    issue.message
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Tipo', 'Gravidade', 'Impacto', 'Descri√ß√£o']],
                    body: issuesData,
                    theme: 'grid',
                    headStyles: {
                        fillColor: [44, 62, 80],
                        textColor: [255, 255, 255],
                        fontStyle: 'bold'
                    },
                    margin: { left: margin, right: margin },
                    styles: { 
                        fontSize: 8,
                        cellPadding: 2,
                        overflow: 'linebreak',
                        lineWidth: 0.1
                    },
                    columnStyles: {
                        0: { cellWidth: 25, fontStyle: 'bold' },
                        1: { cellWidth: 20 },
                        2: { cellWidth: 25 },
                        3: { cellWidth: 'auto' }
                    }
                });
                
                yPosition = doc.lastAutoTable.finalY + 15;
                
                report.issues.forEach((issue, index) => {
                    if (yPosition > 250) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    doc.setFontSize(14);
                    doc.setFont(undefined, 'bold');
                    doc.setTextColor(44, 62, 80);
                    
                    const title = `Problema ${index + 1}: ${issue.message}`;
                    const titleLines = doc.splitTextToSize(title, pageWidth - 2 * margin);
                    doc.text(titleLines, margin, yPosition);
                    
                    yPosition += titleLines.length * 7;
                    doc.setFontSize(12);
                    doc.setFont(undefined, 'normal');
                    doc.setTextColor(0, 0, 0);
                    
                    let suggestionText = issue.suggestion;
                    if (index === 2) {
                        suggestionText = suggestionText.replace("Implemente navega√ß√£o sequencial e skip links no fluxo de compra", "Implemente solu√ß√µes de acessibilidade para navega√ß√£o por teclado");
                    }
                    
                    const issueDetails = [
                        ['Tipo', issue.type.toUpperCase()],
                        ['Gravidade', getSeverityText(issue.severity)],
                        ['Impacto', getImpactText(issue.impact)],
                        ['Contexto', issue.context],
                        ['Sugest√£o', suggestionText]
                    ];
                    
                    doc.autoTable({
                        startY: yPosition,
                        body: issueDetails,
                        theme: 'plain',
                        margin: { left: margin, right: margin },
                        styles: { fontSize: 11 },
                        columnStyles: {
                            0: { fontStyle: 'bold', cellWidth: 30 },
                            1: { cellWidth: 140 }
                        }
                    });
                    
                    yPosition = doc.lastAutoTable.finalY + 15;
                });
            }
            
            if (yPosition > 200) {
                doc.addPage();
                yPosition = 20;
            }
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(44, 62, 80);
            doc.text('Recomenda√ß√µes e Pr√≥ximos Passos', margin, yPosition);
            
            yPosition += 10;
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            
            const recommendations = [
                "1. Priorize corre√ß√µes por impacto real nos usu√°rios",
                "2. Implemente o bookmarklet para an√°lise behind-login",
                "3. Agende uma consultoria personalizada para seu time",
                "4. Realize testes com usu√°rios reais com diferentes defici√™ncias",
                "5. Estabele√ßa um plano de a√ß√£o cont√≠nuo para acessibilidade",
                "6. Considere a implementa√ß√£o de um sistema de design acess√≠vel",
                "7. Treine sua equipe em pr√°ticas de desenvolvimento inclusivo",
                "8. Realize auditorias regulares de acessibilidade"
            ];
            
            recommendations.forEach(rec => {
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = 20;
                }
                doc.text(rec, margin, yPosition);
                yPosition += 7;
            });
            
            const totalPages = doc.internal.getNumberOfPages();
            for (let i = 1; i <= totalPages; i++) {
                doc.setPage(i);
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`P√°gina ${i} de ${totalPages}`, pageWidth / 2, 285, { align: 'center' });
                doc.text(`Relat√≥rio gerado por AcessoF√°cil - ${new Date().toLocaleDateString('pt-BR')}`, pageWidth / 2, 290, { align: 'center' });
            }
            
            doc.save(`relatorio-acessibilidade-${new URL(report.url).hostname}.pdf`);
        }

        function getSeverityText(severity) {
            const severities = { 'low': 'Baixa', 'medium': 'M√©dia', 'high': 'Alta' };
            return severities[severity] || severity;
        }

        function getImpactColor(impact) {
            const colors = { 
                'cegos': '#e74c3c', 
                'deficientes visuais': '#3498db', 
                'deficientes motores': '#f39c12',
                'cognitivos': '#9b59b6',
                'baixa vis√£o': '#2ecc71'
            };
            return colors[impact] || '#95a5a6';
        }

        function getImpactText(impact) {
            const texts = {
                'cegos': 'Cegos',
                'deficientes visuais': 'Deficientes Visuais',
                'deficientes motores': 'Deficientes Motores',
                'cognitivos': 'Deficientes Cognitivos',
                'baixa vis√£o': 'Baixa Vis√£o'
            };
            return texts[impact] || impact;
        }
    </script>
</body>
</html>